<!DOCTYPE html>
<html>
<head>
<title>Checkout - Leopard Bluetooth</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial, sans-serif; background:#f2f2f2; margin:0; padding:0;}
.container{
    max-width:600px; margin:30px auto; background:white; padding:25px; border-radius:12px;
    box-shadow:0 5px 20px rgba(0,0,0,0.25);
}
h2{text-align:center; margin-bottom:20px; color:#333;}
label{display:block; margin-top:15px; font-weight:bold; color:#555;}
input, select{width:100%; padding:12px; margin-top:5px; border-radius:8px; font-size:16px; border:1px solid #ccc;}
.qr{margin-top:20px; text-align:center;}
.qr img{width:80%; max-width:250px; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,0.2);}
button{
    width:100%; padding:14px; background:gray; color:white; border:none; border-radius:10px;
    font-size:17px; cursor:not-allowed; margin-top:25px; transition:0.3s;
}
button.active{background:#000; cursor:pointer;}
.total{font-weight:bold; font-size:16px; margin-top:15px; color:#222;}
@media (min-width:768px){
    .container{max-width:700px;}
}
</style>
</head>
<body>

<div class="container">
<h2>Checkout</h2>

<!-- User Details -->
<label>Name:</label>
<input type="text" id="userName" placeholder="Enter your name">

<label>Phone Number:</label>
<input type="text" id="userPhone" placeholder="Enter your phone number">

<label>Email:</label>
<input type="text" id="userEmail" placeholder="Enter your email">

<label>Address (Optional):</label>
<input type="text" id="userAddress" placeholder="Enter your address">

<!-- Payment Option -->
<label>Choose Payment Option:</label>
<select id="paymentOption" onchange="updatePayment()">
    <option value="cod">COD ₹60 + Packing ₹40 Online</option>
    <option value="fullOnline">Full Online ₹100</option>
</select>

<!-- QR -->
<div class="qr" id="qrContainer">
    <!-- QR will appear here -->
</div>

<!-- TID -->
<label>Enter Transaction ID (TID) after payment:</label>
<input type="text" id="tidInput" placeholder="Enter Transaction ID">

<!-- Total -->
<div class="total" id="totalAmount">Total Amount: ₹100</div>

<!-- Confirm -->
<button id="confirmBtn" onclick="confirmOrder()">Confirm Order</button>

</div>

<script>
// QR file
const qrImage = "images/IMG_20260214_075835_541.png";
const confirmBtn = document.getElementById("confirmBtn");

// User fields
const userName = document.getElementById("userName");
const userPhone = document.getElementById("userPhone");
const userEmail = document.getElementById("userEmail");
const userAddress = document.getElementById("userAddress");
const tidInput = document.getElementById("tidInput");

// Simulated valid TID list (for demo)
const validTIDs = ["TID12345","TID67890","TIDABCDE"];

function updatePayment(){
    const option = document.getElementById("paymentOption").value;
    const qrDiv = document.getElementById("qrContainer");
    const totalDiv = document.getElementById("totalAmount");

    if(option === "cod"){
        qrDiv.innerHTML = `<p>Scan QR to pay ₹40 Online Packing</p><img src="${qrImage}" alt="QR">`;
        totalDiv.innerText = "COD Amount: ₹60 + Packing ₹40 Paid Online";
    } else{
        qrDiv.innerHTML = `<p>Scan QR to pay ₹100 Full Online</p><img src="${qrImage}" alt="QR">`;
        totalDiv.innerText = "Total Online Payment: ₹100";
    }
    checkAllFields();
}

// Enable confirm button only if all required fields + TID filled
function checkAllFields(){
    const tid = tidInput.value.trim();
    if(userName.value.trim() && userPhone.value.trim() && userEmail.value.trim() && tid){
        confirmBtn.classList.add("active");
        confirmBtn.disabled = false;
        confirmBtn.style.cursor = "pointer";
    } else{
        confirmBtn.classList.remove("active");
        confirmBtn.disabled = true;
        confirmBtn.style.cursor = "not-allowed";
    }
}

// Event listeners
[userName,userPhone,userEmail,userAddress,tidInput].forEach(el=> el.addEventListener("input", checkAllFields));

// Initialize
updatePayment();
checkAllFields();

// Confirm Order
function confirmOrder(){
    const option = document.getElementById("paymentOption").value;
    const name = userName.value.trim();
    const phone = userPhone.value.trim();
    const email = userEmail.value.trim();
    const address = userAddress.value.trim();
    const tid = tidInput.value.trim();

    if(!name || !phone || !email || !tid){
        alert("❌ Please fill all required details and enter Transaction ID.");
        return;
    }

    // Validate TID
    if(!validTIDs.includes(tid)){
        alert("❌ Invalid TID! Payment failed. Please enter correct Transaction ID.");
        return;
    }

    let message = `✅ Order Confirmed!\nName: ${name}\nPhone: ${phone}\nEmail: ${email}\n`;
    if(address) message += `Address: ${address}\n`;
    message += `Transaction ID: ${tid}\n`;

    if(option === "cod"){
        message += "Payment: COD ₹60 + Packing ₹40 Paid Online";
    } else{
        message += "Payment: Full Online ₹100 Paid";
    }

    alert(message);
    window.location.href = "index.html";
}
</script>

</body>
</html>
